## PRIVATIZED PORTS (replace regular ports)
building_port = {
	building_group = USU_bg_port_infrastructure
	city_type = port
	icon = "gfx/interface/icons/building_icons/building_port.dds"
	
	ai_nationalization_desire = 0.5 	# Copied from railways - AI is reluctant to privatize vital infrastructure
	
	# has_max_level = yes
	# ignore_stateregion_max_level = yes
	port = yes
	
	unlocking_technologies = { navigation }
	
	production_method_groups = {
		pmg_base_building_port
		pmg_logistics_services_port_coastal
		# pmg_automation_port
	}
	
	required_construction = construction_cost_medium
	ownership_type = self
	
	terrain_manipulator = urban_port
	
	potential = {
		is_coastal = yes
	}
	
	ai_value = {		# scope is state the building is located in
		value = 2000	# Ports are important - Just get it done, eh
		
		if = { # Make colonies happen
			limit = {	
				NOT = { exists = b:building_port }
			}
			# Honestly, the AI should be encouraged to have at least 1 port in every valid state - but let's try not to go overboard. Hopefully this is a manageable criteria to not wreck Great Britain.
			if = {
				limit = {
					is_isolated_from_market = yes
				}
				add = 999999	# Do it NOW
			}
			else_if = {
				limit = {
					is_under_colonization = yes
					is_treaty_port = yes
					is_homeland_of_country_cultures = owner
					is_capital = yes
					is_world_market_hub = yes
				}
				add = 5000      # Do it soon
			}
		}

		if = {
			limit = {
				relative_infrastructure < 1.1
			}
			multiply = 2
		}
		if = {
			limit = {
				relative_infrastructure < 1
			}
			multiply = 4
		}
		
		if = {
			limit = {
				exists = b:building_port
			}
			subtract = {
				sg:transportation ?= {
					value = state_goods_delta
				}
				add = { # transport production once all queued levels are employed
					value = 0
					b:building_port = {
						add = modifier:goods_output_transportation_add
						multiply = {
							value = modifier:goods_output_transportation_mult
							add = 1
						}
						save_temporary_value_as = current_port_transport_production
						if = {
							limit = {
								level > 0
								occupancy > 0
							}
							divide = occupancy
							#save_temporary_value_as = port_transport_production_fully_hired
							divide = level
						}
						else = {
							value = 50 # Assume transport production of best PM
						}
						multiply = {
							value = level_after_queued_constructions
							add = 1
						}
						subtract = scope:current_port_transport_production
					}
				}
				min = 0
				sg:transportation ?= {
					divide = {
						value = state_goods_consumption
						min = 1
					}
				}
				multiply = 6000
			}
		}
	}
	
	background = "gfx/interface/icons/building_icons/backgrounds/building_panel_bg_monuments.dds"
}
