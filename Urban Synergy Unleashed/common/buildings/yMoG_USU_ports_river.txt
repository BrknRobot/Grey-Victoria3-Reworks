## RIVER PORTS
building_river_port = {
	building_group = USU_bg_river_port_infrastructure
	icon = "gfx/interface/icons/building_icons/building_port.dds"
	
	ai_nationalization_desire = 0.5 	# Copied from railways - AI is reluctant to privatize vital infrastructure
	ai_value = {
		value = 2000 # Just get it done, eh
		
		if = {
			limit = {
				relative_infrastructure < 1.1
			}
			multiply = 2
		}
		if = {
			limit = {
				relative_infrastructure < 1
			}
			multiply = 4
		}
		
		if = {
			limit = {
				exists = b:building_river_port
			}
			subtract = {
				sg:transportation ?= {
					value = state_goods_delta
				}
				add = { # transport production once all queued levels are employed
					value = 0
					b:building_river_port = {
						add = modifier:goods_output_transportation_add
						multiply = {
							value = modifier:goods_output_transportation_mult
							add = 1
						}
						save_temporary_value_as = current_port_transport_production
						if = {
							limit = {
								level > 0
								occupancy > 0
							}
							divide = occupancy
							#save_temporary_value_as = port_transport_production_fully_hired
							divide = level
						}
						else = {
							value = 90 # Assume transport production of best PM
						}
						multiply = {
							value = level_after_queued_constructions
							add = 1
						}
						subtract = scope:current_port_transport_production
					}
				}
				min = 0
				sg:transportation ?= {
					divide = {
						value = state_goods_consumption
						min = 1
					}
				}
				multiply = 6000
			}
		}
	}
	
	has_max_level = yes
	
	unlocking_technologies = { navigation }
	
	production_method_groups = {
		pmg_base_building_river_port
		pmg_logistics_services_port_river
		# pmg_automation_port
	}
	
	required_construction = construction_cost_low
	ownership_type = self
	
	terrain_manipulator = urban_port
	
	potential = {
		rt_on_river = yes
	}
	
	background = "gfx/interface/icons/building_icons/backgrounds/building_panel_bg_monuments.dds"
}

